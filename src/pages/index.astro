---
import { getAllWalks } from "@lib/wordPressAPI";
import { useWordPressAPI } from "@lib/store";
import { getNumberOfWalks, getTotalMilesWalked } from "@lib/functions";

const allWalks = await getAllWalks();
const walkData = {
	totalWalks: getNumberOfWalks(allWalks),
	totalMiles: getTotalMilesWalked(allWalks),
};

import Layout from "../components/layouts/Layout.astro";
import Hero from "./_components/Hero.astro";
import WalkStats from "./_components/WalkStats.astro";

const pageData = await useWordPressAPI.getWordPressPageBySlug("home");
---

<Layout title={pageData?.seo?.title} description={pageData?.seo?.description} canonical="/">
	<Hero />
	<WalkStats walkData={walkData} />
</Layout>
